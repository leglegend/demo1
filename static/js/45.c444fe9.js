(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[45],{"./src/api/swagger/mods/homepage.mod.ts":function(t,e,o){"use strict";var n,a=o("./node_modules/axios/index.js"),i=o.n(a);!function(t){t.editActiveState=function e(t,o){return i.a.post("/sa/show/v1/homepage/edit-active-state",t,o)},t.editActiveStateUrl="/sa/show/v1/homepage/edit-active-state",t.getActiveOverview=function o(t,e){return i.a.post("/sa/show/v1/homepage/get-active-overview",t,e)},t.getActiveOverviewUrl="/sa/show/v1/homepage/get-active-overview",t.getActiveState=function n(t,e){return void 0===t&&(t={}),i.a.post("/sa/show/v1/homepage/get-active-state",e)},t.getActiveStateUrl="/sa/show/v1/homepage/get-active-state",t.getInternetRecords=function a(t,e){return void 0===t&&(t={}),i.a.post("/sa/show/v1/homepage/get-internet-records",e)},t.getInternetRecordsUrl="/sa/show/v1/homepage/get-internet-records",t.getServiceOverview=function r(t,e){return void 0===t&&(t={}),i.a.post("/sa/show/v1/homepage/get-service-overview",e)},t.getServiceOverviewUrl="/sa/show/v1/homepage/get-service-overview",t.getUserOverview=function s(t,e){return void 0===t&&(t={}),i.a.post("/sa/show/v1/homepage/get-user-overview",e)},t.getUserOverviewUrl="/sa/show/v1/homepage/get-user-overview",t.totalInactive=function l(t,e){return void 0===t&&(t={}),i.a.post("/sa/show/v1/homepage/total-inactive",e)},t.totalInactiveUrl="/sa/show/v1/homepage/total-inactive",t.officeLocationOverview=function c(t,e){return i.a.get("/sa/show/v1/homepage/office-location-overview?limit="+t.limit+"&offset="+t.offset,e)},t.officeLocationOverviewUrl="/sa/show/v1/homepage/office-location-overview"}(n||(n={})),e["a"]=n},"./src/home/mod_strategy/online_strategy/flow_control/index.vue":function(t,e,o){"use strict";o.r(e);var n,a=o("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),i=o("./src/home/mod_common/mixin/form.ts"),r=o("./src/home/mod_common/mixin/modal.ts"),s=o("./node_modules/axios/index.js"),l=o.n(s);!function(t){t.add=function e(t,o){return l.a.post("/sa/show/v1/strategy/flow-control/add",t,o)},t.addUrl="/sa/show/v1/strategy/flow-control/add",t.appList=function o(t,e){return void 0===t&&(t={}),l.a.get("/sa/show/v1/strategy/flow-control/app-list",e)},t.appListUrl="/sa/show/v1/strategy/flow-control/app-list",t.changePriority=function n(t,e){return l.a.post("/sa/show/v1/strategy/flow-control/change-priority",t,e)},t.changePriorityUrl="/sa/show/v1/strategy/flow-control/change-priority",t.remove=function a(t,e){return l.a.post("/sa/show/v1/strategy/flow-control/delete",t,e)},t.removeUrl="/sa/show/v1/strategy/flow-control/delete",t.detail=function i(t,e){return l.a.get("/sa/show/v1/strategy/flow-control/detail?id="+t.id,e)},t.detailUrl="/sa/show/v1/strategy/flow-control/detail",t.edit=function r(t,e){return l.a.post("/sa/show/v1/strategy/flow-control/edit",t,e)},t.editUrl="/sa/show/v1/strategy/flow-control/edit",t.list=function s(t,e){return l.a.get("/sa/show/v1/strategy/flow-control/list?limit="+t.limit+"&offset="+t.offset+"&keyword="+t.keyword+"&user_id="+t.user_id,e)},t.listUrl="/sa/show/v1/strategy/flow-control/list",t.lowestPriority=function c(t,e){return l.a.get("/sa/show/v1/strategy/flow-control/lowest-priority?id="+t.id,e)},t.lowestPriorityUrl="/sa/show/v1/strategy/flow-control/lowest-priority",t.setStatus=function p(t,e){return l.a.post("/sa/show/v1/strategy/flow-control/set-status",t,e)},t.setStatusUrl="/sa/show/v1/strategy/flow-control/set-status",t.timeList=function u(t,e){return void 0===t&&(t={}),l.a.get("/sa/show/v1/strategy/flow-control/time-list",e)},t.timeListUrl="/sa/show/v1/strategy/flow-control/time-list",t.userGroup=function f(t,e){return void 0===t&&(t={}),l.a.get("/sa/show/v1/strategy/flow-control/user-group",e)},t.userGroupUrl="/sa/show/v1/strategy/flow-control/user-group"}(n||(n={}));var c=n,p=o("./src/api/swagger/mods/homepage.mod.ts"),u=o("./src/const/common.ts"),f=o("./src/const/mod_strategy.ts"),d=o("./src/components/form/form_base_info/index.vue"),m=o("./src/components/application_scope/index.vue"),v=o("./src/components/select_application/index.vue"),y=o("./src/components/common/field_validate_mixin.ts"),_=o("./src/home/mod_common/util/tool.ts"),h=o("./node_modules/@sxf/sf-vue-component/src/widgets/tree/check_state.js"),b=o("./node_modules/lodash/cloneDeep.js"),g=o.n(b),w=o("./node_modules/lodash/isEqual.js"),x=o.n(w);function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(t)}var S=function(){var t=function e(o,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},t(o,n)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),D=function(){return D=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},D.apply(this,arguments)},L=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===("undefined"==typeof Reflect?"undefined":O(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r},k=function(t,e,o,n){return new(o||(o=Promise))((function(a,i){function r(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n["throw"](t))}catch(t){i(t)}}function l(t){t.done?a(t.value):function e(t){return t instanceof o?t:new o((function(e){e(t)}))}(t.value).then(r,s)}l((n=n.apply(t,e||[])).next())}))},j=function(t,e){var o,n,a,i,r={label:0,sent:function t(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function l(i){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(a=2&i[0]?n["return"]:i[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,n=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(t){i=[6,t],n=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},A=function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,a,i=o.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)r.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(o=i["return"])&&o.call(i)}finally{if(a)throw a.error}}return r},T=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(A(arguments[e]));return t},M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ALL_TEXT="全部",e.formData={app_group_list:[],app_list:[],is_all:"no"},e.appTree={},e.appTreeData=[],e.tagList=[],e.selectAppList=[],e}return S(e,t),e.prototype.onHandleValue=function(t){if(!x()(this.formData,t)){this.formData=g()(t);var e=this.formData.app_group_list||[],o=this.formData.app_list||[];this.selectAppList=T(e,o)}},e.prototype.mounted=function(){this.initAppData()},Object.defineProperty(e.prototype,"appModalOptions",{get:function t(){var e={width:720,title:"应用"};return this.readonly?D(D({},e),{buttons:[{actionName:"cancel",text:"关闭"}]}):e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSelectAll",{get:function t(){return"yes"===this.formData.is_all},enumerable:!1,configurable:!0}),e.prototype.initAppData=function(){return k(this,void 0,void 0,(function(){var t,e,o,n;return j(this,(function(a){switch(a.label){case 0:return[4,c.appList({},{mask:this.$parent})];case 1:return t=a.sent(),e=t.list,o=void 0===e?[]:e,n=t.tree,this.appTree=null!=n?n:{},this.appTreeData=n?[n]:[],this.tagList=o.map((function(t){return{label:t.name,checkValue:t.id}})),[2]}}))}))},e.prototype.formatSelectList=function(t){var e=[],o=[],n=[],a=[];return t.forEach((function t(i){var r,s;i.check_state!==u["e"][h["a"].CHECK_NONE]&&(i.check_state!==u["e"][h["a"].CHECK_ALL]?null===(s=i.children)||void 0===s||s.forEach(t):!(null===(r=i.children)||void 0===r?void 0:r.length)?(o.push(i.id),a.push(i.name)):(e.push(i.id),n.push(i.name)))})),{appGroupList:e,appList:o,selectAppNameList:a,selectGroupNameList:n}},e.prototype.setFormDataAndRenderApp=function(t,e){var o,n=Object(_["e"])(e,t),a=this.formatSelectList(n),i=a.appGroupList,r=a.appList,s=a.selectAppNameList,l=a.selectGroupNameList;return this.formData.app_group_list=i,this.formData.app_list=r,1===i.length&&i[0]===(null===(o=this.appTree)||void 0===o?void 0:o.id)?this.formData.is_all="yes":this.formData.is_all="no",this.$emit("input",this.formData),T(l,s)},e.prototype.textAppnName=function(){this.setFormDataAndRenderApp(this.appTreeData,this.selectAppList).join("，")},L([Object(a["c"])({type:Object,default:function t(){return{app_group_list:[],app_list:[],is_all:"no"}}})],e.prototype,"value",void 0),L([Object(a["c"])({type:Boolean,default:!1})],e.prototype,"readonly",void 0),L([Object(a["c"])({type:Boolean,default:!1})],e.prototype,"defaultDisabled",void 0),L([Object(a["c"])({type:Boolean,default:!0})],e.prototype,"isSelectApp",void 0),L([Object(a["f"])("value",{immediate:!0})],e.prototype,"onHandleValue",null),e=L([Object(a["a"])({components:{ApplicationSelect:v["a"]}})],e)}(Object(a["b"])(y["a"])),U=M,P=o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),$=Object(P["a"])(U,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("application-select",{staticClass:"application-select",attrs:{"tag-list":t.tagList,"allow-blank":!t.isSelectApp,"default-disabled":t.defaultDisabled,readonly:t.readonly,"render-text":t.setFormDataAndRenderApp,"modal-options":t.appModalOptions,"tree-data":t.appTreeData},model:{value:t.selectAppList,callback:function(e){t.selectAppList=e},expression:"selectAppList"}})}),[],!1,null,"41961499",null).exports,C=o("./src/components/icon_qtip/index.vue"),R=o("./src/util/tool.js");function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(t)}var I=function(){var t=function e(o,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},t(o,n)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),N=function(){return N=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},N.apply(this,arguments)},B=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===("undefined"==typeof Reflect?"undefined":E(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r},G=function(t,e,o,n){return new(o||(o=Promise))((function(a,i){function r(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n["throw"](t))}catch(t){i(t)}}function l(t){t.done?a(t.value):function e(t){return t instanceof o?t:new o((function(e){e(t)}))}(t.value).then(r,s)}l((n=n.apply(t,e||[])).next())}))},F=function(t,e){var o,n,a,i,r={label:0,sent:function t(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function l(i){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(a=2&i[0]?n["return"]:i[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,n=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(t){i=[6,t],n=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.STATUS=u["n"],e.FLOW_LIMIT=Object.freeze(f["v"]),e.formData={name:"",description:"",status:u["n"].value.enable,type_limit:f["v"].value.user,max_band:"",time_id:"",application_scope:{scope:f["c"].options.filter((function(t){return t.value!==f["c"].value.sourceIp})).map((function(t){return t.value})),users:[],users_tree:{},terminal:f["L"].options.map((function(t){return t.value})),source_ip:{type:f["H"].value.all,list:[]},destination_ip:{type:f["s"].value.all,list:[]}},application_app:{app_group_list:[],app_list:[],is_all:"no"}},e.priorityList=[],e.timeList=[],e.userTreeData=[],e.bandOptions={},e}return I(e,t),Object.defineProperty(e.prototype,"isUserLimit",{get:function t(){return this.formData.type_limit===f["v"].value.user},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applicationScopeLabel",{get:function t(){return this.isUserLimit?"适用范围":"适用应用"},enumerable:!1,configurable:!0}),e.prototype.mounted=function(){this.templateData&&(this.formData=Object(R["n"])({},this.formData,this.templateData)),this.isEdit&&this.initPriorityList(),this.loadTimeList(),this.getMaxBandLimit(),this.initUserData()},e.prototype.initPriorityList=function(){var t;return G(this,void 0,void 0,(function(){var e,o,n;return F(this,(function(a){switch(a.label){case 0:return[4,c.lowestPriority({id:(null===(t=this.templateData)||void 0===t?void 0:t.id)||""},{mask:this.$parent})];case 1:for(e=a.sent(),o=(null==e?void 0:e.lowest_priority)||1,n=1;n<=o;n++)this.priorityList.push(n);return[2]}}))}))},e.prototype.loadTimeList=function(){return G(this,void 0,void 0,(function(){var t,e;return F(this,(function(o){switch(o.label){case 0:return[4,c.timeList({},{mask:this.$parent})];case 1:return t=o.sent().list,e=void 0===t?[]:t,this.timeList=e.map(_["d"]),[2]}}))}))},e.prototype.initUserData=function(){return G(this,void 0,void 0,(function(){var t;return F(this,(function(e){switch(e.label){case 0:return[4,c.userGroup({},{mask:this.$parent})];case 1:return t=e.sent(),this.userTreeData=t?[t]:[],this.isUserLimit&&this.templateData||(this.formData.application_scope.users=Object(R["k"])(this.userTreeData)),[2]}}))}))},e.prototype.getMaxBandLimit=function(){return G(this,void 0,void 0,(function(){var t;return F(this,(function(e){switch(e.label){case 0:return[4,p["a"].getServiceOverview()];case 1:return t=e.sent(),this.bandOptions.maxValue=t.max_bw,[2]}}))}))},e.prototype.$_formMixin_request=function(){var t,e=this.$_formMixin_getJsonValue(),o=this.isUserLimit?N(N({},e),{application_app:{}}):N(N({},e),{application_scope:{}});return o=this.isEdit?N(N({},o),{id:(null===(t=this.templateData)||void 0===t?void 0:t.id)||""}):o,this.isEdit?c.edit(o,{mask:this.$parent}):c.add(o,{mask:this.$parent})},B([Object(a["c"])({type:Object})],e.prototype,"templateData",void 0),B([Object(a["c"])({type:Boolean,default:!1})],e.prototype,"isEdit",void 0),B([Object(a["d"])("band")],e.prototype,"bandRef",void 0),e=B([Object(a["a"])({components:{BaseInfo:d["a"],ApplicationScope:m["a"],ApplicationSelect:$,IconQtip:C["a"]}})],e)}(Object(a["b"])(i["a"],r["a"])),z=H,W=Object(P["a"])(z,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("sf-scrollbar",[o("sf-form",{ref:"form",staticClass:"add-strategy common-form-flex",attrs:{"auto-label-width":""}},[o("span",{staticClass:"common-form-title"},[t._v("\n            基本信息\n        ")]),t._v(" "),o("base-info",{attrs:{"record-data":t.formData,"priority-list":t.priorityList,"is-edit":t.isEdit}}),t._v(" "),o("span",{staticClass:"common-form-title"},[t._v("\n            流控设置\n        ")]),t._v(" "),o("sf-form-item",{attrs:{"label-text":"限制"}},[o("sf-radio-group",{attrs:{name:"type_limit"},model:{value:t.formData.type_limit,callback:function(e){t.$set(t.formData,"type_limit",e)},expression:"formData.type_limit"}},t._l(t.FLOW_LIMIT.options,(function(e,n){return o("sf-radio",{key:n,staticClass:"add-strategy__radio",attrs:{"check-value":e.value}},[t._v("\n                    "+t._s(e.label)+"\n                    "),e.value===t.FLOW_LIMIT.value.user?o("icon-qtip",{staticClass:"common-form-tips-icon",attrs:{"tip-text":"建议最大带宽为用户平均带宽的5~10倍，您可根据实际情况设置。"}}):t._e()],1)})),1)],1),t._v(" "),o("sf-form-item",{attrs:{"label-text":"最大带宽"}},[o("sf-numberfield",t._b({attrs:{name:"max_band","allow-blank":!1,"min-value":1,"allow-decimals":!1,"nan-text":"请输入整数"},model:{value:t.formData.max_band,callback:function(e){t.$set(t.formData,"max_band",e)},expression:"formData.max_band"}},"sf-numberfield",t.bandOptions,!1)),t._v(" "),o("span",{staticClass:"add-strategy__unit"},[t._v("\n                Mb/s\n            ")])],1),t._v(" "),o("sf-form-item",{attrs:{"label-text":"生效时间"}},[o("sf-select",{attrs:{name:"time_id",options:t.timeList,"allow-blank":!1},model:{value:t.formData.time_id,callback:function(e){t.$set(t.formData,"time_id",e)},expression:"formData.time_id"}})],1),t._v(" "),o("span",{staticClass:"common-form-title"},[t._v("\n            适用范围\n        ")]),t._v(" "),o("sf-form-item",{directives:[{name:"show",rawName:"v-show",value:t.isUserLimit,expression:"isUserLimit"}],attrs:{"label-text":t.applicationScopeLabel}},[o("application-scope",{ref:"applicationScope",staticClass:"form-content",attrs:{name:"application_scope","user-tree-data":t.userTreeData,"valid-scope":!0},model:{value:t.formData.application_scope,callback:function(e){t.$set(t.formData,"application_scope",e)},expression:"formData.application_scope"}})],1),t._v(" "),o("sf-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.isUserLimit,expression:"!isUserLimit"}],attrs:{"label-text":t.applicationScopeLabel}},[o("application-select",{attrs:{"is-select-app":!t.isUserLimit,name:"application_app"},model:{value:t.formData.application_app,callback:function(e){t.$set(t.formData,"application_app",e)},expression:"formData.application_app"}})],1)],1)],1)}),[],!1,null,"f96f5cd6",null).exports,K=o("./src/components/audit_settings/index.vue"),V=o("./src/home/mod_strategy/common/detail_mixin.ts");function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(t)}var J=function(){var t=function e(o,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},t(o,n)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Q=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===("undefined"==typeof Reflect?"undefined":q(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r},X=function(t,e,o,n){return new(o||(o=Promise))((function(a,i){function r(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n["throw"](t))}catch(t){i(t)}}function l(t){t.done?a(t.value):function e(t){return t instanceof o?t:new o((function(e){e(t)}))}(t.value).then(r,s)}l((n=n.apply(t,e||[])).next())}))},Y=function(t,e){var o,n,a,i,r={label:0,sent:function t(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function l(i){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(a=2&i[0]?n["return"]:i[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,n=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(t){i=[6,t],n=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.detail={name:"",description:"",status:"",creator:"",type_limit:f["v"].value.user,control_content:{content:[],app:{list:[],action:"",time_id:"",time_name:""},web_file:{http:{status:u["n"].value.enable,excluded_url:[]},ftp:"",file_type:[],method:[],action:"",time_id:"",time_name:""},email:{source_addr:{status:"",action:"",list:[]},destination_addr:{status:"",action:"",list:[]},keyword:{status:"",list:[]},attachment:{status:"",list:[]},limit:{status:"",type:[],size:"",attachments:""}}},application_scope:{scope:[],users:[],terminal:[],source_ip:{type:"",list:[]},destination_ip:{type:"",list:[]}},application_app:{app_group_list:[],app_list:[],is_all:"no"}},e.FLOW_LIMIT=Object.freeze(f["v"]),e.userTreeData=[],e.operationMap={load:c.detail},e.textRenderOptions={labelWidth:24,lineHeight:24},e}return J(e,t),e.prototype.mounted=function(){this.loadUserTreeData()},Object.defineProperty(e.prototype,"isUserLimit",{get:function t(){return this.detail.type_limit===f["v"].value.user},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scopeTitle",{get:function t(){return this.isUserLimit?"适用范围":"适用应用"},enumerable:!1,configurable:!0}),e.prototype.loadUserTreeData=function(){return X(this,void 0,void 0,(function(){var t;return Y(this,(function(e){switch(e.label){case 0:return[4,c.userGroup({},{mask:this.$parent})];case 1:return t=e.sent(),this.userTreeData=t?[t]:[],[2]}}))}))},e=Q([Object(a["a"])({components:{ApplicationScope:m["a"],ApplicationSelect:$,ControlContent:K["a"]}})],e)}(Object(a["b"])(V["a"])),tt=Z,et=Object(P["a"])(tt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"strategy-detail"},[o("span",{staticClass:"common-form-title"},[t._v("\n       基本信息\n    ")]),t._v(" "),t._l(t.basicInfo,(function(e,n){return o("ss-text-render",t._b({key:n,staticClass:"detail-item"},"ss-text-render",e,!1))})),t._v(" "),o("span",{staticClass:"common-form-title"},[t._v("\n        流控设置\n    ")]),t._v(" "),o("ss-text-render",t._b({staticClass:"detail-item",attrs:{"label-text":"限制",value:t.FLOW_LIMIT.text[t.detail.type_limit]}},"ss-text-render",t.textRenderOptions,!1)),t._v(" "),o("ss-text-render",t._b({staticClass:"detail-item",attrs:{"label-text":"最大带宽",value:t.detail.max_band+"Mb/s"}},"ss-text-render",t.textRenderOptions,!1)),t._v(" "),o("ss-text-render",t._b({staticClass:"detail-item",attrs:{"label-text":"生效时间",value:t.detail.time_name}},"ss-text-render",t.textRenderOptions,!1)),t._v(" "),o("span",{staticClass:"common-form-title"},[t._v("\n        适用范围\n    ")]),t._v(" "),o("ss-text-render",t._b({staticClass:"detail-item",attrs:{"label-text":t.scopeTitle}},"ss-text-render",t.textRenderOptions,!1),[t.isUserLimit?o("application-scope",{attrs:{"user-tree-data":t.userTreeData,"default-disabled":!0,"input-width":490},model:{value:t.detail.application_scope,callback:function(e){t.$set(t.detail,"application_scope",e)},expression:"detail.application_scope"}}):o("application-select",{attrs:{"default-disabled":!0,readonly:!0},model:{value:t.detail.application_app,callback:function(e){t.$set(t.detail,"application_app",e)},expression:"detail.application_app"}})],1)],2)}),[],!1,null,"3747f13e",null).exports,ot=o("./src/components/add_strategy_type_select/index.vue"),nt=o("./src/home/mod_strategy/common/tip_layer.vue"),at=o("./src/home/mod_strategy/common/strategy_index_mixin.ts"),it=o("./src/home/mod_common/decorators/table.ts");function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(t)}var st=function(){var t=function e(o,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},t(o,n)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),lt=function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===("undefined"==typeof Reflect?"undefined":rt(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r},ct=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.operationMap={deleteRecords:c.remove,changeStatus:c.setStatus,getStrategys:c.list,draggableSort:c.changePriority},e.formatApplicationScope=_["a"],e.editBtnDisabled=!0,e}return st(e,t),e.prototype.onHandleKeyword=function(t){this.$_draggableMixin_filter(t)},e.prototype.openNewStrategyModal=function(t){this.$_strategyModalMixin_addStrategy(W,{width:640,props:{templateData:t}})},e.prototype.editStrategyModal=function(){var t,e=this,o=null===(t=e.detailRef)||void 0===t?void 0:t.$_detailMixin_getDetail();e.$_strategyModalMixin_editStrategyModal(W,{width:640,props:{templateData:o,isEdit:!0},submitCallback:function t(){var o,n;e.$_tableMixin_refresh(),null===(n=null===(o=e.detailRef)||void 0===o?void 0:o.$_detailMixin_loadDetail)||void 0===n||n.call(o)}})},e.prototype.renderContent=function(t,e){var o;return e.type_limit===f["v"].value.user?"单个用户最大带宽"+t+" Mb/s":null!==(o="应用最大带宽"+t+" Mb/s")&&void 0!==o?o:"-"},e.prototype.isUserLimit=function(t){return t.type_limit===f["v"].value.user},e.prototype.updateDrawerStatus=function(t){this.strategyRecord.name=t.name||"-",this.setEditBtnDisabled(!1)},e.prototype.setEditBtnDisabled=function(t){this.editBtnDisabled=t},lt([Object(a["d"])("detailRef")],e.prototype,"detailRef",void 0),lt([Object(it["a"])((function(t){return{loadParams:{keyword:"",limit:10,user_id:""},selectionMode:"multi",selectionHide:!1,loadFn:t.$_strategyMixin_loadFn}}))],e.prototype,"gridOption",void 0),lt([Object(a["f"])("gridOption.loadParams.keyword")],e.prototype,"onHandleKeyword",null),e=lt([Object(a["a"])({components:{AddStrategyTypeSelect:ot["a"],StrategyDetail:et,TipLayer:nt["a"]}})],e)}(Object(a["b"])(at["a"])),pt=ct,ut=Object(P["a"])(pt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",[o("auto-breadcrumb"),t._v(" "),o("sf-card",{directives:[{name:"set-min-height",rawName:"v-set-min-height"}],staticClass:"common-content--padding common-card--no-head-padding content-recognition"},[o("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n            流控策略\n            "),o("tip-layer",{ref:"tipLayer",attrs:{"tip-text":"您可对用户或应用进行流量管控，未配置则默认不管控。"}})],1),t._v(" "),o("sf-grid",{directives:[{name:"show",rawName:"v-show",value:t.strategysLength||t.isTableLoding,expression:"strategysLength || isTableLoding"}],key:t.mixinKey},[o("sf-toolbar",{ref:"toolbar"},[o("sf-button-blank",{staticClass:"btn-blank",attrs:{"default-disabled":t.isTableLoding,"icon-cls":"icon-gongjulan-xinzeng","ga-data":3901},on:{click:function(e){return t.openNewStrategyModal()}}},[t._v("\n                    新增\n                ")]),t._v(" "),o("sf-button-blank",{staticClass:"btn-blank",attrs:{"action-name":"delete","icon-cls":"icon-gongjulan-shanchu","ga-data":3902},on:{click:function(e){t.$_strategyMixin_delete(t.$_tableMixin_getAllSelections())}}},[t._v("\n                    删除\n                ")]),t._v(" "),o("ss-vertical-sep",{attrs:{spacing:0}}),t._v(" "),o("sf-button-blank",{staticClass:"btn-blank",attrs:{"action-name":"enable","icon-cls":"icon-enable","ga-data":3903},on:{click:function(e){t.$_strategyMixin_enable(t.$_tableMixin_getAllSelections())}}},[t._v("\n                    启用\n                ")]),t._v(" "),o("sf-button-blank",{staticClass:"btn-blank",attrs:{"action-name":"disable","icon-cls":"icon-disable","ga-data":3904},on:{click:function(e){t.$_strategyMixin_disable(t.$_tableMixin_getAllSelections())}}},[t._v("\n                    禁用\n                ")]),t._v(" "),o("template",{slot:"right"},[o("sf-searchfield",{attrs:{"param-key":"keyword",placeholder:"请输入策略名称"},model:{value:t.gridOption.loadParams.keyword,callback:function(e){t.$set(t.gridOption.loadParams,"keyword",e)},expression:"gridOption.loadParams.keyword"}})],1)],2),t._v(" "),o("sf-table",{directives:[{name:"set-min-height",rawName:"v-set-min-height"}],ref:"table",attrs:{options:t.gridOption,"default-height":300}},[o("sf-table-column",{attrs:{"data-index":"priority",title:"优先级",align:"center","default-width":60}}),t._v(" "),o("sf-table-column",{attrs:{"data-index":"name",title:"策略名称","default-width":136},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.record;return[o("span",{staticClass:"common-ellipsis common-link__text",attrs:{title:n.name,"ga-data":3905},on:{click:function(e){return e.stopPropagation(),t.$_strategyModalMixin_openDetailDrawer(n)}}},[t._v("\n                            "+t._s(t._f("empty")(n.name))+"\n                        ")])]}}])}),t._v(" "),o("sf-table-column",{attrs:{"data-index":"max_band",title:"管控内容","default-width":.4,renderer:t.renderContent}}),t._v(" "),o("sf-table-column",{attrs:{"data-index":"application",title:"适用范围","default-width":.6},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.record;return[t.isUserLimit(n)&&t.$_strategyMixin_isScopeShow(n)?o("div",{staticClass:"content-recognition__scope"},t._l(n.application_scope.scope,(function(e,a){return o("p",{key:a,staticClass:"common-ellipsis content-recognition__scope-item",attrs:{title:t.formatApplicationScope(n.application_scope,e)}},[t._v("\n                                "+t._s(t.formatApplicationScope(n.application_scope,e))+"\n                            ")])})),0):!t.isUserLimit(n)&&n.app_name_list.length?o("div",{staticClass:"content-recognition__scope"},[o("p",{staticClass:"common-ellipsis content-recognition__scope-item",attrs:{title:n.app_name_list.join("、")}},[t._v("\n                                "+t._s(n.app_name_list.join("、"))+"\n                            ")])]):o("span",[t._v("\n                            -\n                        ")])]}}])}),t._v(" "),o("sf-table-column",{attrs:{"data-index":"time_name",title:"生效时间","default-width":100}}),t._v(" "),o("sf-table-column",{attrs:{"data-index":"status",title:"策略状态","default-width":80},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.record;return[n.status?o("i",{staticClass:"iconfont",class:[t.STATUS.icon[n.status],"common-status-icon--"+n.status],attrs:{title:n.status===t.STATUS.value.enable?t.STATUS.actionText.disable:t.STATUS.actionText.enable,"ga-data":3906},on:{click:function(e){return e.stopPropagation(),t.$_strategyMixin_changeStatus([n],n.status)}}}):o("span",[t._v("\n                            -\n                        ")])]}}])}),t._v(" "),o("sf-table-column",{attrs:{"data-index":"creator",title:"创建人","default-width":100}}),t._v(" "),o("sf-table-column",{attrs:{title:"操作","data-index":"opr","default-width":112},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.record;return o("div",{staticClass:"content-recognition__operation"},[o("span",{staticClass:"common-link__text-margin",attrs:{"ga-data":3907},on:{click:function(e){return e.stopPropagation(),t.$_strategyMixin_delete([n])}}},[t._v("\n                           删除\n                        ")]),t._v(" "),t.gridOption.loadParams.keyword?t._e():o("draggable-handler")],1)}}])})],1)],1),t._v(" "),t.strategysLength||t.isTableLoding?t._e():o("add-strategy-type-select",{attrs:{"add-customize-strategy":t.openNewStrategyModal,"display-type":"table"}}),t._v(" "),o("sf-drawer",{attrs:{title:t.strategyRecord.name,visible:t.isDetailShow,size:"640px",direction:"rtl","destroy-on-close":!0},on:{"update:visible":function(e){t.isDetailShow=e},closed:t.$_strategyModalMixin_resetRecord}},[o("strategy-detail",{ref:"detailRef",attrs:{record:t.strategyRecord},on:{"before-load":function(e){return t.setEditBtnDisabled(!0)},"after-load":t.updateDrawerStatus}}),t._v(" "),o("template",{slot:"footer"},[o("sf-button-primary",{attrs:{"default-disabled":t.editBtnDisabled,"ga-data":3908},on:{click:t.$filterRemind}},[t._v("\n                    编辑\n                ")])],1)],2)],1)],1)}),[],!1,null,"7c65db80",null);e["default"]=ut.exports}}]);