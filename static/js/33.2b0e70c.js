(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{"./src/components/detail_drawer/title_bar.vue":function(t,e,n){"use strict";var o=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(t)}var i=function(){var t=function e(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(n,o)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"titleStyle",{get:function t(){return{height:this.defaultHeight+"px",lineHeight:this.defaultHeight+"px"}},enumerable:!1,configurable:!0}),r([Object(o["c"])({type:String,default:""})],e.prototype,"title",void 0),r([Object(o["c"])({type:String,default:""})],e.prototype,"subTitle",void 0),r([Object(o["c"])({type:Number,default:48})],e.prototype,"defaultHeight",void 0),r([Object(o["c"])({type:String,default:""})],e.prototype,"icon",void 0),e=r([Object(o["a"])({})],e)}(o["e"]),l=s,c=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=Object(c["a"])(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title-bar__header",style:t.titleStyle},[n("div",{staticClass:"title-bar__title common-ellipsis",attrs:{title:t.title}},[t.icon?n("i",{class:["iconfont","title-bar__icon",t.icon]}):t._e(),t._v("\n        "+t._s(t.title)+"\n    ")]),t._v(" "),t.subTitle?n("span",{staticClass:"title-bar__sub-title"},[n("ss-vertical-sep",{staticClass:"title-bar__sep",attrs:{spacing:8,height:10}}),t._v("\n        "+t._s(t.subTitle)+"\n    ")],1):t._e(),t._v(" "),n("div",{staticClass:"title-bar__right"},[t._t("right")],2)])}),[],!1,null,"275b5459",null);e["a"]=u.exports},"./src/components/recommended_strategy_layer/index.vue":function(t,e,n){"use strict";var o=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(t)}var i=function(){var t=function e(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(n,o)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.addCustomizeStrategy=function(t){this.$emit("add-strategy",t)},r([Object(o["c"])({type:Array,default:function t(){return[]}})],e.prototype,"recommendedStrategy",void 0),e=r([Object(o["a"])({})],e)}(o["e"]),l=s,c=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=Object(c["a"])(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"recommended-strategy"},[n("div",{ref:"recommendedTemplate",staticClass:"recommended-strategy__title--right common-link__text"},[n("lang",[t._v("推荐配置{#btn#}")]),t._v(" "),n("i",{staticClass:"iconfont icon-xinxi12beifen common-form-tips-icon recommended-strategy__icon"})],1),t._v(" "),n("sf-layer",{attrs:{"default-target":"recommendedTemplate",trigger:"hover","arrow-hide":!1,anchor:"top-end",offset:4,cls:"recommended-strategy__option-layer"}},[n("ul",{staticClass:"recommended-strategy__select"},t._l(t.recommendedStrategy,(function(e,o){return n("li",{key:o,staticClass:"sfv-option sfv-option-text recommended-strategy__option",on:{click:function(n){return t.addCustomizeStrategy(e.data)}}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0)])],1)}),[],!1,null,"cc2548ca",null);e["a"]=u.exports},"./src/home/mod_strategy/online_strategy/content_recognition/detail/index.vue":function(t,e,n){"use strict";var o=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),a=n("./src/components/detail_drawer/title_bar.vue"),i=n("./src/components/application_scope/index.vue"),r=n("./src/home/mod_strategy/online_strategy/content_recognition/modal/add_strategy/web_excluded_sites/index.vue"),s=n("./src/home/mod_strategy/online_strategy/content_recognition/modal/add_strategy/email_excluded_sites/index.vue"),l=n("./src/components/select_application/index.vue"),c=n("./src/home/mod_strategy/common/detail_mixin.ts"),u=n("./src/api/swagger/mods/strategyContentDetect.mod.ts"),d=n("./src/const/common.ts"),p=n("./src/const/mod_strategy.ts");function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(t)}var m=function(){var t=function e(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(n,o)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},b=function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o["throw"](t))}catch(t){i(t)}}function l(t){t.done?a(t.value):function e(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(r,s)}l((o=o.apply(t,e||[])).next())}))},v=function(t,e){var n,o,a,i,r={label:0,sent:function t(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function l(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(t){i=[6,t],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.STATUS=d["n"],e.DECODE_METHOD=p["o"],e.DECODE_CONTENT=p["n"],e.EMAIL_DECODE_CONTENT=p["t"],e.CUSTOMIZE_DECODE=p["l"],e.detail={name:"",description:"",status:"",priority:"",method:"",web:{status:"",content:"",customize:[],apps:[],domains:[],reject_QUIC:""},email:{status:"",content:[],exception:[]},application_scope:{scope:[],users:[],terminal:[],source_ip:{type:"",list:[]},destination_ip:{type:"",list:[]}}},e.tagList=[],e.appTreeData=[],e.userTreeData=[],e.appModalOptions={width:640,title:_("应用{#title#}"),buttons:[{actionName:"cancel",text:_("关闭")}]},e.POP3protocolTips=[_("只适用于审计"),_("勾选此项可能会导致OUTLOOK添加加密新账号失败。{#tip#}")].join("<br>"),e.treeOptions={left:{width:295},right:{width:295}},e.operationMap={load:u["a"].detail},e}return m(e,t),e.prototype.mounted=function(){this.loadUserTreeData(),this.loadApplications()},e.prototype.loadApplications=function(){return b(this,void 0,void 0,(function(){var t;return v(this,(function(e){switch(e.label){case 0:return[4,u["a"].saasAppGroup({},{mask:this.$parent})];case 1:return t=e.sent(),this.appTreeData=t?[t]:[],[2]}}))}))},e.prototype.loadUserTreeData=function(){return b(this,void 0,void 0,(function(){var t;return v(this,(function(e){switch(e.label){case 0:return[4,u["a"].userGroup({},{mask:this.$parent})];case 1:return t=e.sent(),this.userTreeData=t?[t]:[],[2]}}))}))},e.prototype.openWebExcludedSites=function(){this.$modal(r["a"],{title:_("白名单{#title#}"),props:{defaultDisabled:!0},width:960,height:542,buttons:[{actionName:"cancel",text:_("关闭{#btn#}")}],autoDestroy:!0}).open()},e.prototype.openEmailExcludedSites=function(){this.$modal(s["a"],{title:_("白名单{#title#}"),width:480,props:{excludedSitesList:this.detail.email.exception,defaultDisabled:!0},buttons:[{actionName:"cancel",text:_("关闭{#btn#}")}],autoDestroy:!0}).open()},e=y([Object(o["a"])({components:{TitleBar:a["a"],AppSelect:l["a"],ApplicationScope:i["a"]}})],e)}(Object(o["b"])(c["a"])),g=h,x=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),w=Object(x["a"])(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"strategy-detail content-recognition-detail"},[n("lang",{staticClass:"common-form-title"},[t._v("基本信息{#title#}")]),t._v(" "),t._l(t.basicInfo,(function(e,o){return n("ss-text-render",t._b({key:o,staticClass:"detail-item"},"ss-text-render",e,!1))})),t._v(" "),n("lang",{staticClass:"common-form-title"},[t._v("策略设置{#title#}")]),t._v(" "),n("ss-text-render",t._b({staticClass:"detail-item",attrs:{"label-text":t._("解密方式{#label#}"),value:t.DECODE_METHOD.text[t.detail.method]}},"ss-text-render",t.textRenderOptions,!1)),t._v(" "),n("ss-text-render",t._b({staticClass:"detail-item",attrs:{"label-text":t._("识别内容{#label#}")}},"ss-text-render",t.textRenderOptions,!1),[n("div",{staticClass:"setting-object"},[n("sf-checkbox",{attrs:{"true-value":t.STATUS.value.enable,"false-value":t.STATUS.value.disable,"default-disabled":!0},model:{value:t.detail.web.status,callback:function(e){t.$set(t.detail.web,"status",e)},expression:"detail.web.status"}},[n("lang",{staticClass:"detail-item--title"},[t._v("应用、网页{#title#}")])],1),t._v(" "),n("div",{staticClass:"common-form-content-wrap"},[n("ss-text-render",t._b({staticClass:"detail-item",attrs:{"label-text":t._("解密内容{#label#}")}},"ss-text-render",t.textRenderOptions,!1),[n("span",{staticClass:"text-render__text"},[t._v("\n                        "+t._s(t._f("empty")(t.DECODE_CONTENT.text[t.detail.web.content]))+"\n                    ")])]),t._v(" "),n("div",{staticClass:"content-recognition-detail__sub-content"},[t.detail.web.content===t.DECODE_CONTENT.value.customize?[t.detail.web.customize.includes(t.CUSTOMIZE_DECODE.value.app)?n("ss-text-render",{staticClass:"detail-item",attrs:{"line-height":t.textRenderOptions.lineHeight,"label-text":t._("SaaS应用或者网页分类{#label#}")}},[n("app-select",{attrs:{"tag-list":t.tagList,"default-width":252,"has-tag":!1,"tree-options":t.treeOptions,"modal-options":t.appModalOptions,"tree-data":t.appTreeData,readonly:!0},model:{value:t.detail.web.apps,callback:function(e){t.$set(t.detail.web,"apps",e)},expression:"detail.web.apps"}})],1):t._e(),t._v(" "),t.detail.web.customize.includes(t.CUSTOMIZE_DECODE.value.domains)?n("ss-text-render",{staticClass:"detail-item",attrs:{"line-height":t.textRenderOptions.lineHeight,"label-width":36,"label-text":t._("域名{#label#}")}},[t.detail.web.domains.length?n("div",{staticClass:"text-render__text"},[t._l(t.detail.web.domains.slice(0,5),(function(e,o){return n("p",{key:o,staticClass:"common-ellipsis content-recognition-detail__domain",attrs:{title:e}},[t._v("\n                                    "+t._s(e)+"\n                                ")])})),t._v(" "),t.detail.web.domains.length>=5?n("p",{attrs:{title:t.detail.web.domains.join("\n")}},[t._v("\n                                    ...\n                                ")]):t._e()],2):n("span",{staticClass:"text-render__text"},[t._v("\n                                -\n                            ")])]):t._e()]:t._e(),t._v(" "),n("sf-button",{staticClass:"content-recognition-detail__btn",attrs:{size:"small"},on:{click:t.openWebExcludedSites}},[n("lang",[t._v("白名单{#btn#}")])],1)],2),t._v(" "),n("ss-text-render",t._b({staticClass:"detail-item",attrs:{"label-text":t._("高级设置{#label#}")}},"ss-text-render",t.textRenderOptions,!1),[n("sf-checkbox",{attrs:{"true-value":t.STATUS.value.enable,"false-value":t.STATUS.value.disable,"default-disabled":!0},model:{value:t.detail.web.reject_QUIC,callback:function(e){t.$set(t.detail.web,"reject_QUIC",e)},expression:"detail.web.reject_QUIC"}},[n("lang",[t._v("拒绝QUIC协议")])],1)],1)],1),t._v(" "),n("sf-checkbox",{attrs:{"true-value":t.STATUS.value.enable,"false-value":t.STATUS.value.disable,"default-disabled":!0},model:{value:t.detail.email.status,callback:function(e){t.$set(t.detail.email,"status",e)},expression:"detail.email.status"}},[n("lang",{staticClass:"detail-item--title"},[t._v("邮件{#title#}")])],1),t._v(" "),n("div",{staticClass:"common-form-content-wrap"},[n("ss-text-render",t._b({staticClass:"detail-item",attrs:{"label-text":t._("解密内容{#label#}")}},"ss-text-render",t.textRenderOptions,!1),[n("sf-checkbox-group",{attrs:{name:"email.content"},model:{value:t.detail.email.content,callback:function(e){t.$set(t.detail.email,"content",e)},expression:"detail.email.content"}},[n("sf-checkbox",{staticClass:"strategy-detail__block",attrs:{"check-value":t.EMAIL_DECODE_CONTENT.value.send,"default-disabled":!0}},[n("lang",[t._v("发送邮件(SMTP加密)")])],1),t._v(" "),n("sf-checkbox",{staticClass:"strategy-detail__block strategy-detail__checkbox",attrs:{"check-value":t.EMAIL_DECODE_CONTENT.value.receive,"default-disabled":!0}},[n("lang",[t._v("接收邮件(POP3/IMAP加密)")]),t._v(" "),n("i",{directives:[{name:"qtip",rawName:"v-qtip",value:t.POP3protocolTips,expression:"POP3protocolTips"}],staticClass:"iconfont icon-xinxi12beifen common-form-tips-icon"})],1)],1)],1),t._v(" "),n("sf-button",{staticClass:"strategy-detail__block content-recognition-detail__btn content-recognition-detail__sub-content",attrs:{size:"small"},on:{click:t.openEmailExcludedSites}},[n("lang",[t._v("白名单{#btn#}")])],1)],1)],1)]),t._v(" "),n("lang",{staticClass:"common-form-title"},[t._v("适用范围{#title#}")]),t._v(" "),n("ss-text-render",t._b({staticClass:"detail-item",attrs:{"label-text":t._("适用范围{#label#}")}},"ss-text-render",t.textRenderOptions,!1),[n("application-scope",{attrs:{"user-tree-data":t.userTreeData,"default-disabled":!0,"input-width":490},model:{value:t.detail.application_scope,callback:function(e){t.$set(t.detail,"application_scope",e)},expression:"detail.application_scope"}})],1)],2)}),[],!1,null,"82b9bbec",null);e["a"]=w.exports},"./src/home/mod_strategy/online_strategy/content_recognition/index.vue":function(t,e,n){"use strict";n.r(e);var o=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),a=n("./src/home/mod_strategy/common/strategy_index_mixin.ts"),i=n("./src/home/mod_strategy/online_strategy/content_recognition/modal/add_strategy/index.vue"),r=n("./src/components/add_strategy_type_select/index.vue"),s=n("./src/components/recommended_strategy_layer/index.vue"),l=n("./src/home/mod_strategy/online_strategy/content_recognition/detail/index.vue"),c=n("./src/home/mod_strategy/common/tip_layer.vue"),u=n("./src/const/mod_strategy.ts"),d=n("./src/api/swagger/mods/strategyContentDetect.mod.ts"),p=n("./src/home/mod_common/util/tool.ts");function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(t)}var m=function(){var t=function e(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(n,o)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},b=function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o["throw"](t))}catch(t){i(t)}}function l(t){t.done?a(t.value):function e(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(r,s)}l((o=o.apply(t,e||[])).next())}))},v=function(t,e){var n,o,a,i,r={label:0,sent:function t(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function l(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(t){i=[6,t],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.operationMap={deleteRecords:d["a"].remove,changeStatus:d["a"].setStatus,getStrategys:d["a"].list,draggableSort:d["a"].changePriority},e.formatApplicationScope=p["a"],e.recommendedStrategy=[],e.editBtnDisabled=!0,e}return m(e,t),e.prototype.onHandleKeyword=function(t){this.$_draggableMixin_filter(t)},e.prototype.mounted=function(){},e.prototype.selectAddStrategyType=function(){this.$_strategyModalMixin_selectAddStrategyType(r["a"],{width:400,props:{addCustomizeStrategy:this.openNewStrategyModal,recommendedStrategy:this.recommendedStrategy,displayType:"modal"}})},e.prototype.openNewStrategyModal=function(t){this.$_strategyModalMixin_addStrategy(i["a"],{width:this.$isEnglish?661:640,props:{templateData:t}})},e.prototype.editStrategyModal=function(){var t=this,e=t.$refs.detail,n=null==e?void 0:e.$_detailMixin_getDetail();t.$_strategyModalMixin_editStrategyModal(i["a"],{width:640,props:{templateData:n,isEdit:!0},submit:t.filterRemind,submitCallback:function n(){var o;t.$_tableMixin_refresh(),null===(o=null==e?void 0:e.$_detailMixin_loadDetail)||void 0===o||o.call(e)}})},e.prototype.renderIdentifyContent=function(t){return t.map((function(t){return u["y"].text[t]})).join(_("、"))||"-"},e.prototype.loadRecommendedStrategys=function(){return b(this,void 0,void 0,(function(){var t,e;return v(this,(function(n){switch(n.label){case 0:return[4,this.$http.get("template/content-detect")];case 1:return t=n.sent().list,e=void 0===t?[]:t,this.recommendedStrategy=e,[2]}}))}))},e.prototype.updateDrawerStatus=function(t){this.strategyRecord.name=t.name||"-",this.setEditBtnDisabled(!1)},e.prototype.setEditBtnDisabled=function(t){this.editBtnDisabled=t},e=y([Object(o["a"])({components:{AddStrategyTypeSelect:r["a"],RecommendedStrategy:s["a"],ContentRecognitionDetail:l["a"],TipLayer:c["a"]}})],e)}(Object(o["b"])(a["a"])),g=h,x=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),w=Object(x["a"])(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sf-card",{directives:[{name:"set-min-height",rawName:"v-set-min-height"}],staticClass:"common-content--padding common-card--no-head-padding content-recognition"},[n("div",{attrs:{slot:"title"},slot:"title"},[n("lang",[t._v("内容识别策略{#title#}")]),t._v(" "),n("tip-layer",{ref:"tipLayer",attrs:{"tip-text":t._("配置SSL解密识别内容，不配置可能导致部分审计和管控策略无法生效。{#tip#}")}})],1),t._v(" "),n("sf-grid",{directives:[{name:"show",rawName:"v-show",value:t.strategysLength||t.isTableLoding,expression:"strategysLength || isTableLoding"}],key:t.mixinKey},[n("sf-toolbar",{ref:"toolbar"},[n("sf-button-blank",{staticClass:"btn-blank",attrs:{"default-disabled":t.isTableLoding,"icon-cls":"icon-gongjulan-xinzeng"},on:{click:function(e){return t.openNewStrategyModal()}}},[n("lang",[t._v("新增{#btn#}")])],1),t._v(" "),n("sf-button-blank",{staticClass:"btn-blank",attrs:{"action-name":"delete","icon-cls":"icon-gongjulan-shanchu"},on:{click:t.filterRemind}},[n("lang",[t._v("删除{#btn#}")])],1),t._v(" "),n("ss-vertical-sep",{attrs:{spacing:0}}),t._v(" "),n("sf-button-blank",{staticClass:"btn-blank",attrs:{"action-name":"enable","icon-cls":"icon-enable"},on:{click:t.filterRemind}},[n("lang",[t._v("启用{#btn#}")])],1),t._v(" "),n("sf-button-blank",{staticClass:"btn-blank",attrs:{"action-name":"disable","icon-cls":"icon-disable"},on:{click:t.filterRemind}},[n("lang",[t._v("禁用{#btn#}")])],1),t._v(" "),n("template",{slot:"right"},[n("sf-searchfield",{attrs:{"param-key":"keyword",placeholder:t._("请输入策略名称")},on:{trigger:t.filterRemind},model:{value:t.gridOption.loadParams.keyword,callback:function(e){t.$set(t.gridOption.loadParams,"keyword",e)},expression:"gridOption.loadParams.keyword"}})],1)],2),t._v(" "),n("sf-table",{directives:[{name:"set-min-height",rawName:"v-set-min-height"}],ref:"table",attrs:{options:t.gridOption,"default-height":300}},[n("sf-table-column",{attrs:{"data-index":"priority",title:t._("优先级{#header#}"),align:"center","default-width":60}}),t._v(" "),n("sf-table-column",{attrs:{"data-index":"name",title:t._("策略名称{#header#}"),"default-width":136},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.record;return[n("span",{staticClass:"common-ellipsis common-link__text",attrs:{title:o.name},on:{click:function(e){return e.stopPropagation(),t.$_strategyModalMixin_openDetailDrawer(o)}}},[t._v("\n                            "+t._s(t._f("empty")(o.name))+"\n                        ")])]}}])}),t._v(" "),n("sf-table-column",{attrs:{"data-index":"content",title:t._("识别内容{#header#}"),"default-width":.4,renderer:t.renderIdentifyContent}}),t._v(" "),n("sf-table-column",{attrs:{"data-index":"application",title:t._("适用范围{#header#}"),"default-width":.6},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.record;return[t.$_strategyMixin_isScopeShow(o)?n("div",{staticClass:"content-recognition__scope"},t._l(o.application_scope.scope,(function(e,a){return n("p",{key:a,staticClass:"common-ellipsis content-recognition__scope-item",attrs:{title:t.formatApplicationScope(o.application_scope,e)}},[t._v("\n                                "+t._s(t.formatApplicationScope(o.application_scope,e))+"\n                            ")])})),0):n("span",[t._v("\n                            -\n                        ")])]}}])}),t._v(" "),n("sf-table-column",{attrs:{"data-index":"status",title:t._("策略状态{#header#}"),"default-width":80},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.record;return[o.status?n("i",{staticClass:"iconfont",class:[t.STATUS.icon[o.status],"common-status-icon--"+o.status],attrs:{title:o.status===t.STATUS.value.enable?t.STATUS.actionText.disable:t.STATUS.actionText.enable},on:{click:function(e){return e.stopPropagation(),t.filterRemind(e)}}}):n("span",[t._v("\n                            -\n                        ")])]}}])}),t._v(" "),n("sf-table-column",{attrs:{"data-index":"creator",title:t._("创建人{#header#}"),"default-width":80}}),t._v(" "),n("sf-table-column",{attrs:{title:t._("操作{#header#}"),"default-width":160}},[n("div",{staticClass:"content-recognition__operation"},[n("span",{staticClass:"common-link__text-margin",on:{click:function(e){return e.stopPropagation(),t.filterRemind(e)}}},[t._v("\n                            "+t._s(t._("删除{#btn#}"))+"\n                        ")]),t._v(" "),t.gridOption.loadParams.keyword?t._e():n("draggable-handler")],1)])],1)],1),t._v(" "),t.strategysLength||t.isTableLoding?t._e():n("add-strategy-type-select",{attrs:{"add-customize-strategy":t.openNewStrategyModal,"recommended-strategy":t.recommendedStrategy,"display-type":"table"}}),t._v(" "),n("sf-drawer",{attrs:{title:t.strategyRecord.name,visible:t.isDetailShow,size:"640px",direction:"rtl","destroy-on-close":!0},on:{"update:visible":function(e){t.isDetailShow=e}}},[n("content-recognition-detail",{ref:"detail",attrs:{record:t.strategyRecord},on:{"before-load":function(e){return t.setEditBtnDisabled(!0)},"after-load":t.updateDrawerStatus}}),t._v(" "),n("template",{slot:"footer"},[n("sf-button-primary",{attrs:{"default-disabled":t.editBtnDisabled},on:{click:t.editStrategyModal}},[n("lang",[t._v("编辑")])],1)],1)],2)],1)}),[],!1,null,"008442f4",null);e["default"]=w.exports},"./src/home/mod_strategy/online_strategy/content_recognition/modal/add_strategy/index.vue":function(t,e,n){"use strict";var o=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),a=n("./src/home/mod_common/mixin/form.ts"),i=n("./src/const/common.ts"),r=n("./src/const/mod_strategy.ts"),s=n("./src/api/swagger/mods/strategyContentDetect.mod.ts"),l=n("./src/components/form/form_base_info/index.vue"),c=n("./src/components/application_scope/index.vue"),u=n("./src/home/mod_strategy/online_strategy/content_recognition/modal/add_strategy/components/recognition_content.vue"),d=n("./src/util/tool.js");function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(t)}var f=function(){var t=function e(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(n,o)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=function(){return m=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},m.apply(this,arguments)},_=function(t,e,n,o){var a,i=arguments.length,r=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},y=function(t,e,n,o){return new(n||(n=Promise))((function(a,i){function r(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o["throw"](t))}catch(t){i(t)}}function l(t){t.done?a(t.value):function e(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(r,s)}l((o=o.apply(t,e||[])).next())}))},b=function(t,e){var n,o,a,i,r={label:0,sent:function t(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function l(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o["return"]:i[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(t){i=[6,t],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formData={name:"",description:"",status:i["n"].value.enable,priority:"",method:r["o"].value.client,web:{status:i["n"].value.disable,content:r["n"].value.customize,customize:[],apps:[],domains:[],reject_QUIC:i["n"].value.disable},email:{status:i["n"].value.disable,content:[],exception:[]},application_scope:{scope:r["c"].options.filter((function(t){return t.value!==r["c"].value.sourceIp})).map((function(t){return t.value})),users:[],users_tree:{},terminal:r["L"].options.map((function(t){return t.value})),source_ip:{type:r["H"].value.all,list:[]},destination_ip:{type:r["s"].value.all,list:[]}}},e.inputWidth=496,e.priorityList=[],e.userTreeData=[],e}return f(e,t),Object.defineProperty(e.prototype,"maskTarget",{get:function t(){return this.$parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionContentWidth",{get:function t(){return this.$isEnglish?473:this.inputWidth},enumerable:!1,configurable:!0}),e.prototype.created=function(){this.inputWidth=this.$isEnglish?450:496},e.prototype.mounted=function(){this.templateData&&(this.formData=Object(d["n"])({},this.formData,this.templateData)),this.isEdit&&this.initPriorityList(),this.initUserData(),this.initDefaultDomains()},e.prototype.initUserData=function(){return y(this,void 0,void 0,(function(){var t;return b(this,(function(e){switch(e.label){case 0:return[4,s["a"].userGroup({},{mask:this.maskTarget})];case 1:return t=e.sent(),this.userTreeData=t?[t]:[],this.templateData||(this.formData.application_scope.users=Object(d["k"])(this.userTreeData)),[2]}}))}))},e.prototype.initDefaultDomains=function(){var t;return y(this,void 0,void 0,(function(){var e,n;return b(this,(function(o){switch(o.label){case 0:return(null===(t=this.formData.web.domains)||void 0===t?void 0:t.length)?[2]:[4,s["a"].defaultDomainList({},{mask:this.maskTarget})];case 1:return e=o.sent().list,n=void 0===e?[]:e,this.formData.web.domains=n,[2]}}))}))},e.prototype.initPriorityList=function(){var t;return y(this,void 0,void 0,(function(){var e,n,o;return b(this,(function(a){switch(a.label){case 0:return[4,s["a"].lowestPriority({id:(null===(t=this.templateData)||void 0===t?void 0:t.id)||""},{mask:this.maskTarget})];case 1:for(e=a.sent(),n=(null==e?void 0:e.lowest_priority)||1,o=1;o<=n;o++)this.priorityList.push(o);return[2]}}))}))},e.prototype.$_formMixin_customValid=function(){var t;return null===(t=this.$refs.recognitionContent)||void 0===t?void 0:t.customValid()},e.prototype.$_formMixin_request=function(){var t,e=this.$_formMixin_getFormData(this.formData),n=this.isEdit?m(m({},e),{id:(null===(t=this.templateData)||void 0===t?void 0:t.id)||""}):e;return(this.isEdit?s["a"].edit:s["a"].add)(n,{mask:this.maskTarget})},_([Object(o["c"])({type:Object})],e.prototype,"templateData",void 0),_([Object(o["c"])({type:Boolean,default:!1})],e.prototype,"isEdit",void 0),e=_([Object(o["a"])({components:{BaseInfo:l["a"],ApplicationScope:c["a"],RecognitionContent:u["a"]}})],e)}(Object(o["b"])(a["a"])),h=v,g=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),x=Object(g["a"])(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sf-scrollbar",{staticClass:"add-strategy-scrollbar"},[n("sf-form",{ref:"form",staticClass:"add-strategy",attrs:{"auto-label-width":""}},[n("lang",{staticClass:"common-form-title"},[t._v("基本信息{#title#}")]),t._v(" "),n("base-info",{attrs:{"record-data":t.formData,"priority-list":t.priorityList,"default-width":t.inputWidth,"is-edit":t.isEdit}}),t._v(" "),n("lang",{staticClass:"common-form-title"},[t._v("策略设置{#title#}")]),t._v(" "),n("recognition-content",{ref:"recognitionContent",attrs:{"record-data":t.formData,"input-width":t.recognitionContentWidth,"mask-target":t.maskTarget}}),t._v(" "),n("lang",{staticClass:"common-form-title"},[t._v("适用范围{#title#}")]),t._v(" "),n("sf-form-item",{attrs:{"label-text":t._("适用范围")}},[n("application-scope",{ref:"applicationScope",attrs:{name:"application_scope","user-tree-data":t.userTreeData,"input-width":t.inputWidth,"allow-blank":!1},model:{value:t.formData.application_scope,callback:function(e){t.$set(t.formData,"application_scope",e)},expression:"formData.application_scope"}})],1)],1)],1)}),[],!1,null,"85cb7810",null);e["a"]=x.exports}}]);